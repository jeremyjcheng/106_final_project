<<<<<<< Updated upstream
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shifting Seasons: Human Impact on U.S. Rainfall</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, sans-serif;
        line-height: 1.6;
        color: #333;
        background-color: #f5f5f5;
        overflow: hidden;
      }

      .slides-container {
        width: 100vw;
        height: 100vh;
        position: relative;
        overflow: hidden;
        background-color: #f5f5f5;
      }

      .slide {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 4rem;
        opacity: 0;
        visibility: hidden;
        transform: translateX(0);
        transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1),
          visibility 0.6s cubic-bezier(0.4, 0, 0.2, 1),
          transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        background-color: #f5f5f5;
        will-change: opacity, transform;
      }

      .slide.active {
        opacity: 1;
        visibility: visible;
        transform: translateX(0);
        z-index: 10;
      }

      .slide.prev {
        opacity: 0;
        visibility: hidden;
        transform: translateX(-20px);
        z-index: 1;
      }

      .slide.next {
        opacity: 0;
        visibility: hidden;
        transform: translateX(20px);
        z-index: 1;
      }

      .slide-content {
        max-width: 1200px;
        width: 100%;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 3rem;
        align-items: center;
      }

      .slide-text {
        display: flex;
        flex-direction: column;
        gap: 1.2rem;
        font-size: 1.05rem;
      }

      .slide-number {
        display: inline-block;
        background-color: #2e86ab;
        color: white;
        width: 46px;
        height: 46px;
        border-radius: 50%;
        text-align: center;
        line-height: 46px;
        font-weight: bold;
        font-size: 1.1rem;
        margin-bottom: 0.75rem;
      }

      .slide h2 {
        color: #2e86ab;
        font-size: 2.1rem;
        margin-bottom: 0.3rem;
      }

      .slide p {
        font-size: 1.05rem;
        line-height: 1.7;
        color: #333;
      }

      .slide .highlight {
        color: #a23b72;
        font-weight: 600;
      }

      .slide-viz {
        width: 100%;
        height: 460px;
        background-color: #111;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.18);
        padding: 1.2rem;
        display: flex;
        flex-direction: column;
      }

      .chart-title {
        color: #e5e5e5;
        font-size: 0.95rem;
        margin-bottom: 0.4rem;
        text-align: center;
      }

      .chart-container {
        flex: 1;
        width: 100%;
        height: 100%;
      }

      .title-slide {
        background: linear-gradient(135deg, #2e86ab 0%, #1a5490 100%);
        color: white;
        text-align: center;
      }

      .title-slide h1 {
        font-size: 3.6rem;
        margin-bottom: 1.2rem;
        color: white;
      }

      .title-slide .subtitle {
        font-size: 1.6rem;
        opacity: 0.92;
        margin-bottom: 2.2rem;
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
      }

      .title-slide .authors {
        font-size: 1.1rem;
        margin-top: 2.6rem;
      }

      .title-slide-inner {
        max-width: 900px;
      }

      .slide-indicator {
        position: fixed;
        bottom: 2rem;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 0.75rem;
        z-index: 1000;
        align-items: center;
      }

      .indicator-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background-color: rgba(0, 0, 0, 0.25);
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.2s ease;
      }

      .indicator-dot:hover {
        background-color: rgba(0, 0, 0, 0.4);
        transform: scale(1.2);
      }

      .indicator-dot.active {
        background-color: #2e86ab;
        width: 12px;
        height: 12px;
      }

      @media (max-width: 968px) {
        .slide {
          padding: 2.5rem 1.5rem;
        }

        .slide-content {
          grid-template-columns: 1fr;
        }

        .slide-viz {
          height: 320px;
        }

        .title-slide h1 {
          font-size: 2.6rem;
        }

        .title-slide .subtitle {
          font-size: 1.2rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="slides-container">
      <!-- Title Slide -->
      <div class="slide active title-slide">
        <div class="title-slide-inner">
          <h1>Shifting Seasons, Changing Rain</h1>
          <p class="subtitle">
            Tracing how more than a century of human activity has reshaped when,
            where, and how much rain falls across the United States.
          </p>
          <p class="authors">
            Data Storytelling Prototype &mdash; DSC 106 Final Project
          </p>
        </div>
      </div>

      <!-- Slide 1: Big intro paragraph -->
      <div class="slide">
        <div class="slide-content">
          <div class="slide-text">
            <span class="slide-number">1</span>
            <h2>The Quiet Shift in America’s Seasons</h2>
            <p>
              For more than a century, the rhythm of America’s seasons has been
              quietly shifting. Each winter storm and summer downpour carries
              the imprint of changing climate forces—some natural, others
              unmistakably shaped by human decisions.
            </p>
            <p>
              From industrial-era pollution that once suppressed rainfall, to
              modern warming that fuels stronger moisture cycles and more
              extreme rain events, decades of atmospheric change are written
              into the long-term rise and fall of seasonal precipitation.
            </p>
            <p>
              By tracing these patterns across regions and through time, we can
              see how human activity has intertwined with Earth’s natural
              climate systems, reshaping when, where, and how much rain falls
              each year.
            </p>
          </div>
          <div class="slide-viz">
             <img
                src="images/avg_historical.png"
                style="width:100%; height:100%; object-fit:contain; border-radius:10px;"
            />
          </div>    
        </div>
      </div>

      <!-- Slide 2: Industrial revolution + land use texts -->
      <div class="slide">
        <div class="slide-content">
          <div class="slide-text">
            <span class="slide-number">2</span>
            <h2>From Smoke Stacks to Plowed Fields</h2>
            <p>
              Since the Industrial Revolution, greenhouse gases have warmed and
              moistened the atmosphere, allowing winter storms to carry more
              moisture and produce heavier cold-season precipitation. At the
              same time, early industrial sulfate pollution suppressed cloud
              formation in summer, limiting rainfall that would otherwise have
              increased. As air pollution declined, both winter and summer
              precipitation began to show clearer signs of strengthening.
            </p>
            <p>
              Land clearing, farming, and deforestation have altered how the
              surface stores and releases moisture, reshaping seasonal rainfall
              patterns. In summer, irrigation can boost humidity and enhance
              local storms, while over-plowed drylands become hotter and drier,
              reducing rainfall. In winter, changes to vegetation and soil
              modify surface energy and moisture, subtly influencing storm
              tracks and cold-season precipitation.
            </p>
          </div>
          
        </div>
      </div>

      <!-- Slide 3: Regional summer 2-month precipitation + explanatory text -->
      <div class="slide">
        <div class="slide-content">
          <div class="slide-text">
            <span class="slide-number">3</span>
            <h2>Summer Rainfall by Region, 1850–2020</h2>
            <p>
              Around the 1930s, the summer rainfall in the Midwest and the South
              dropped sharply. This was the famous Dust Bowl drought—a classic
              case of human land use and climate working together. Over-farming
              and poor agricultural practices broke down soil structure; dust
              storms formed, rainfall decreased, and the region fell into years
              of severe drought. After the New Deal introduced soil conservation
              policies, rainfall and climate gradually recovered.
            </p>
            <p>
              In the 1950s, there was another major drought, along with the
              peak of industrial pollution. Summer rainfall in the South, the
              West, and parts of the Midwest dropped again. After World War II,
              industrial emissions and sulfate aerosols from coal power plants
              rose quickly, forming a heavy pollution belt over the eastern and
              midwestern U.S. Studies show that these aerosols created a clear
              “drying effect” in summer and fall, partly canceling out the
              rainfall increase that greenhouse gases would normally cause—especially
              in the Southeast and South.
            </p>
          </div>
          <div class="slide-viz">
            <img
                src="images/summer_precipitation.png"
                style="width:100%; height:100%; object-fit:contain; border-radius:10px;"
  />
          </div>
        </div>
      </div>


    <!-- Navigation dots -->
    <div class="slide-indicator" id="slide-indicator"></div>

    <script>
      /*************** SLIDE NAVIGATION (与原文件相同逻辑) ***************/
      let currentSlide = 0;
      const slides = document.querySelectorAll(".slide");
      const totalSlides = slides.length;

      const indicatorContainer = document.getElementById("slide-indicator");
      for (let i = 0; i < totalSlides; i++) {
        const dot = document.createElement("div");
        dot.className = "indicator-dot";
        if (i === 0) dot.classList.add("active");
        dot.addEventListener("click", () => goToSlide(i));
        indicatorContainer.appendChild(dot);
      }

      function updateSlide() {
        slides.forEach((slide, index) => {
          slide.classList.remove("active", "prev", "next");
          if (index === currentSlide) {
            slide.classList.add("active");
          } else if (index < currentSlide) {
            slide.classList.add("prev");
          } else {
            slide.classList.add("next");
          }
        });

        document.querySelectorAll(".indicator-dot").forEach((dot, index) => {
          dot.classList.toggle("active", index === currentSlide);
        });
      }

      let isTransitioning = false;

      function nextSlide() {
        if (!isTransitioning) {
          isTransitioning = true;
          currentSlide = (currentSlide + 1) % totalSlides;
          updateSlide();
          setTimeout(() => {
            isTransitioning = false;
          }, 600);
        }
      }

      function previousSlide() {
        if (!isTransitioning) {
          isTransitioning = true;
          currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
          updateSlide();
          setTimeout(() => {
            isTransitioning = false;
          }, 600);
        }
      }

      function goToSlide(index) {
        if (index !== currentSlide && !isTransitioning) {
          isTransitioning = true;
          currentSlide = index;
          updateSlide();
          setTimeout(() => {
            isTransitioning = false;
          }, 600);
        }
      }

      document.addEventListener("keydown", (e) => {
        if (e.key === "ArrowRight" || e.key === " ") {
          e.preventDefault();
          nextSlide();
        } else if (e.key === "ArrowLeft") {
          e.preventDefault();
          previousSlide();
        }
      });

      const slidesContainer = document.querySelector(".slides-container");
      slidesContainer.addEventListener("click", (e) => {
        if (
          e.target.closest(".indicator-dot") ||
          e.target.closest(".slide-viz") ||
          e.target.closest("button") ||
          e.target.closest("a")
        ) {
          return;
        }
        const clickX = e.clientX;
        const windowWidth = window.innerWidth;
        const leftHalf = clickX < windowWidth / 2;
        if (leftHalf) {
          previousSlide();
        } else {
          nextSlide();
        }
      });

      updateSlide();

      /*************** D3 CHART HELPERS ***************/
      function createSvg(containerSelector, margin) {
        const container = document.querySelector(containerSelector);
        const rect = container.getBoundingClientRect();
        const width = rect.width;
        const height = rect.height;

        const svg = d3
          .select(containerSelector)
          .append("svg")
          .attr("width", width)
          .attr("height", height);

        const innerWidth = width - margin.left - margin.right;
        const innerHeight = height - margin.top - margin.bottom;

        const g = svg
          .append("g")
          .attr("transform", `translate(${margin.left},${margin.top})`);

        return { svg, g, innerWidth, innerHeight };
      }


      
      /*************** INIT D3 ***************/
      drawSummerChart(summerData);
      drawAvgChart(avgData);

      // 简单自适应：窗口尺寸改变时重绘两个图
      window.addEventListener("resize", () => {
        d3.selectAll("#summer-chart svg, #avg-chart svg").remove();
        drawSummerChart(summerData);
        drawAvgChart(avgData);
      });
    </script>
  </body>
</html>
=======
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>When It Rains: America's Changing Climate</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://d3js.org/d3.v7.min.js"></script>
  </head>
  <body>
    <div class="slides-container">
      <!-- Title Slide -->
      <div class="slide active title-slide">
        <h1>When It Rains: America's Changing Climate</h1>
        <p class="subtitle">
          How precipitation patterns are shifting across the United States
        </p>
        <p class="authors">
          Claudine Handali, Sharon Tey, Charles Zhang, Jeremy Cheng
        </p>
      </div>

      <!-- About Slide -->
      <div class="slide">
        <div class="slide-content">
          <div class="slide-text">
            <span class="slide-number">1</span>
            <h2>The Quiet Shift in America’s Seasons</h2>
            <p>
              For more than a century, the rhythm of America’s seasons has been
              quietly shifting. Each winter storm and summer downpour carries
              the imprint of changing climate forces—some natural, others
              unmistakably shaped by human decisions.
            </p>
            <p>
              Human activities since the Industrial Revolution changed seasonal rainfall.
              Greenhouse gases made the air warmer and wetter, leading to heavier winter precipitation.
              But early industrial sulfate pollution reduced summer rainfall by suppressing clouds.
              As pollution later decreased, both winter and summer rainfall began to increase more clearly.
            </p>
            <p>
              Land clearing, farming, and deforestation changed how the land holds and releases moisture, reshaping seasonal rainfall.
              In summer, irrigation can increase humidity and storms, while over-plowed dry areas become hotter and drier.
              In winter, changes in vegetation and soil affect surface energy and moisture, subtly influencing storm paths and rainfall.
            </p>
          </div>
          <div class="slide-viz">
            <img
              src="images/avg_historical.png"
              style="
                width: 100%;
                height: 100%;
                object-fit: contain;
                border-radius: 10px;
              "
            />
          </div>
        </div>
      </div>

      <!-- Slide 2: Industrial revolution + land use texts -->
      <div class="slide">
        <div class="slide-content">
          <div class="slide-text">
            <span class="slide-number">2</span>
            <h2>Along the long timeline of the past, some marks of human influence</h2>
            <!-- 新增 id，方便在 JS 里监听 hover -->
            <p id="industrial-text-1">
              Around the 1930s, the summer rainfall in the Midwest and the South
              dropped sharply. This was the famous Dust Bowl drought—a classic
              case of human land use and climate working together. Over-farming
              and poor agricultural practices broke down soil structure; dust
              storms formed, rainfall decreased, and the region fell into years
              of severe drought. After the New Deal introduced soil conservation
              policies, rainfall and climate gradually recovered.
            </p>
            <p id="industrial-text-2">
              In the 1950s, there was another major drought, along with the peak
              of industrial pollution. Summer rainfall in the South, the West,
              and parts of the Midwest dropped again. After World War II,
              industrial emissions and sulfate aerosols from coal power plants
              rose quickly, forming a heavy pollution belt over the eastern and
              midwestern U.S. Studies show that these aerosols created a clear
              “drying effect” in summer and fall, partly canceling out the
              rainfall increase that greenhouse gases would normally
              cause—especially in the Southeast and South.
            </p>
          </div>
          <div class="slide-viz-industrial">
            <div id="industrial-precipitation-chart"></div>
          </div>
        </div>
      </div>


      <!-- Slide 4: Regional Precipitation Chart -->
      <div class="slide scrollable">
        <div class="slide-content regional-chart-slide">
          <div class="slide-text regional-chart-text">
            <span class="slide-number">4</span>
            <h2>Regional Precipitation: Past and Future</h2>
            <p>
              Explore how precipitation patterns vary across different regions
              of the United States, comparing historical data with future
              projections under low and high emission scenarios.
            </p>
          </div>
          <div class="chart-container regional-chart-container">
            <!-- Region Navigation -->
            <div
              style="
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 1rem;
                margin-bottom: 0.5rem;
              "
            >
              <button
                id="prevBtn"
                style="
                  background: #2e86ab;
                  color: white;
                  border: none;
                  padding: 0.5rem 1rem;
                  border-radius: 4px;
                  cursor: pointer;
                  font-size: 14px;
                "
              >
                ← Prev
              </button>
              <div
                id="dotsContainer"
                style="display: flex; gap: 0.75rem; align-items: center"
              ></div>
              <span
                id="regionName"
                style="
                  font-weight: 600;
                  color: #2e86ab;
                  min-width: 100px;
                  text-align: center;
                "
                >Northeast</span
              >
              <button
                id="nextBtn"
                style="
                  background: #2e86ab;
                  color: white;
                  border: none;
                  padding: 0.5rem 1rem;
                  border-radius: 4px;
                  cursor: pointer;
                  font-size: 14px;
                "
              >
                Next →
              </button>
            </div>

            <!-- Chart SVG -->
            <div class="chart-svg-wrapper">
              <svg id="chartSvg"></svg>
            </div>

            <!-- Legend -->
            <div
              style="
                display: flex;
                justify-content: center;
                gap: 1.5rem;
                margin-top: 0;
                margin-bottom: 0.5rem;
                flex-wrap: wrap;
              "
            >
              <div
                class="legend-item active"
                data-scenario="historical"
                style="
                  display: flex;
                  align-items: center;
                  gap: 0.5rem;
                  cursor: pointer;
                "
              >
                <div
                  class="legend-box selected"
                  style="width: 20px; height: 3px; background: #888"
                ></div>
                <span style="font-size: 14px">Historical</span>
              </div>
              <div
                class="legend-item active"
                data-scenario="low"
                style="
                  display: flex;
                  align-items: center;
                  gap: 0.5rem;
                  cursor: pointer;
                "
              >
                <div
                  class="legend-box selected"
                  style="width: 20px; height: 3px; background: #1e88e5"
                ></div>
                <span style="font-size: 14px">Low Emissions (SSP1-2.6)</span>
              </div>
              <div
                class="legend-item active"
                data-scenario="high"
                style="
                  display: flex;
                  align-items: center;
                  gap: 0.5rem;
                  cursor: pointer;
                "
              >
                <div
                  class="legend-box selected"
                  style="width: 20px; height: 3px; background: #e53935"
                ></div>
                <span style="font-size: 14px">High Emissions (SSP5-8.5)</span>
              </div>
              <div
                class="legend-item"
                id="regressionToggle"
                style="
                  display: flex;
                  align-items: center;
                  gap: 0.5rem;
                  cursor: pointer;
                "
              >
                <div
                  style="
                    width: 20px;
                    height: 2px;
                    background: #999;
                    border-top: 1px dashed #999;
                  "
                ></div>
                <span style="font-size: 14px">Trend Lines</span>
              </div>
            </div>

            <!-- Year Range Controls -->
            <div
              style="
                display: flex;
                justify-content: center;
                gap: 0.75rem;
                align-items: center;
                flex-wrap: wrap;
                margin-top: 0;
              "
            >
              <label style="font-size: 14px">Year Range:</label>
              <input
                type="number"
                id="yearStartInput"
                placeholder="Start"
                style="
                  padding: 0.4rem;
                  border: 1px solid #ddd;
                  border-radius: 4px;
                  width: 100px;
                  font-size: 14px;
                "
              />
              <span style="font-size: 14px">to</span>
              <input
                type="number"
                id="yearEndInput"
                placeholder="End"
                style="
                  padding: 0.4rem;
                  border: 1px solid #ddd;
                  border-radius: 4px;
                  width: 100px;
                  font-size: 14px;
                "
              />
              <button
                id="applyYearBtn"
                style="
                  background: #2e86ab;
                  color: white;
                  border: none;
                  padding: 0.4rem 1rem;
                  border-radius: 4px;
                  cursor: pointer;
                  font-size: 14px;
                "
              >
                Apply
              </button>
              <button
                id="resetYearBtn"
                style="
                  background: #999;
                  color: white;
                  border: none;
                  padding: 0.4rem 1rem;
                  border-radius: 4px;
                  cursor: pointer;
                  font-size: 14px;
                "
              >
                Reset
              </button>
            </div>
          </div>
        </div>
        <!-- Tooltip -->
        <div
          id="tooltip"
          style="
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 0.5rem;
            border-radius: 4px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            font-size: 12px;
            z-index: 1000;
          "
        ></div>
      </div>

      <!-- Step 8: Climate Choices Game -->
      <div class="slide">
        <div class="game-slide-content">
          <div class="game-container">
            <iframe src="game/index.html" title="Climate Choices Game"></iframe>
          </div>
        </div>
      </div>

      <!-- Step 9: Writeup -->
      <div class="slide">
        <div
          class="slide-content"
          style="grid-template-columns: 1fr; max-width: 900px; gap: 1.5rem"
        >
          <div class="slide-text">
            <span class="slide-number">9</span>
            <h2>The Writeup</h2>

            <div class="writeup-section">
              <h3>What have you done so far?</h3>
              <p>
                We decided to present our ideas using a slide-based website that
                allows users to navigate through our findings in an interactive
                and engaging manner. We gave a brief overview of how rainfall in
                the United States has shifted over the years, examining
                historical patterns and regional variations across different
                parts of the country. Through our analysis, we've demonstrated
                that rainfall will inevitably increase due to climate change,
                but we still have it in our control to influence the extent of
                these changes. If nations work together to lower carbon emission
                levels, future rainfall can be more predictable and less
                volatile, making it easier for communities to adapt and prepare
                for changing precipitation patterns.
              </p>
            </div>

            <div class="writeup-section">
              <h3>
                What will be the most challenging of your project to design and
                why?
              </h3>
              <p>
                The most challenging aspect of our project was determining how
                to present the data in a fun and engaging way that would capture
                and maintain the audience's attention. The change in
                precipitation levels might not be as significant or immediately
                noticeable as the change in temperature, so it can be
                challenging to convince the audience about the importance and
                urgency of our findings. We needed to find creative ways to
                visualize subtle changes in rainfall patterns while making the
                data accessible and meaningful to a general audience.
                Additionally, we are integrating our work from project 3 due to
                its similar theme of climate change and rainfall patterns,
                however, it is difficult to improve on the existing work and
                align it more with our current goal with this project.
                Nonetheless, we are still looking into this as it project 3
                contains strong evidence and analysis of the topic.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>


      
    
    <div id="slide-indicator" class="slide-indicator"></div>

    <script src="main.js"></script>
    <script src="industrial-precipitation.js"></script>
    <script src="regional-precipitation.js"></script>
  </body>
</html>
>>>>>>> Stashed changes
