<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>When It Rains: America's Changing Climate</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://d3js.org/d3.v7.min.js"></script>
  </head>
  <body>
    <div class="slides-container">
      <canvas id="rainCanvas"></canvas>
      <!-- Title Slide -->
      <div class="slide active title-slide">
        <h1>When It Rains: America's Changing Climate</h1>
        <p class="subtitle">
          How precipitation patterns are shifting across the United States
        </p>
        <p class="authors">
          Claudine Handali, Sharon Tey, Charles Zhang, Jeremy Cheng
        </p>
      </div>

      <!-- Slide 1: Scrollytelling -->
      <div class="slide">
        <iframe
          src="./test/precip.html"
          style="width: 100%; height: 100vh; border: none"
        ></iframe>
      </div>
      <!-- Slide 2: Intro to Regions -->
      <div class="slide">
        <div class="slide-content">
          <div class="typewriter-container">
            <div
              class="typewriter"
              data-text="Now that we understand the national trend, let‚Äôs zoom in on how each U.S. region compares."
            >
              <h1 class="typewriter-text"></h1>
              <span class="cursor"></span>
            </div>
          </div>
        </div>
      </div>
      <!-- Slide 3: Industrial revolution + land use texts -->
      <div class="slide scrollable">
        <div
          class="slide-content"
          style="grid-template-columns: 1fr; max-width: 900px; gap: 1.5rem"
        >
          <div class="slide-text">
            <h2>
              Along the long timeline of the past, some marks of human influence
            </h2>
            <p>
              Over more than 170 years of summer rainfall records, a quiet story
              unfolds. Natural swings in precipitation once shaped the nation‚Äôs
              regions almost entirely on their own, but as the decades progress,
              subtle shifts begin to emerge-patterns that no longer align with
              nature alone. These long timelines reveal the early fingerprints
              of human influence, faint at first, but growing clearer as
              emissions rise and the climate system responds.
            </p>

            <p style="color: #888">
              üí°Tip: Click any <u>legend</u> item to show or hide a region.
              <u>Hover</u> over the lines to explore summer precipitation values
              for each year.
            </p>
          </div>
          <div class="slide-viz-industrial">
            <div id="industrial-precipitation-chart"></div>
          </div>

          <!-- Key Insights Container -->
          <div class="insights-container">
            <div class="insights-header">
              <h3><span>üîç</span> Key Insights</h3>
              <button
                class="insights-toggle"
                aria-label="Toggle insights"
                type="button"
              >
                <svg
                  class="arrow-icon"
                  width="20"
                  height="20"
                  viewBox="0 0 20 20"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <polyline points="6 9 10 13 14 9"></polyline>
                </svg>
              </button>
            </div>

            <div class="insights-content">
              <!-- Northeast -->
              <details class="insight-item">
                <summary class="insight-summary">
                  <span class="region-title"
                    >Northeast: The Wettest Region</span
                  >
                  <span class="detail-arrow">‚ñº</span>
                </summary>
                <div class="insight-detail">
                  The Northeast sits downwind of the Atlantic Ocean, giving it
                  abundant moisture year-round. With warming temperatures, the
                  atmosphere holds more water vapor, which amplifies heavy
                  summer rainfall events. This causes the Northeast to show the
                  strongest upward trend in precipitation over the past century.
                </div>
              </details>

              <!-- South -->
              <details class="insight-item">
                <summary class="insight-summary">
                  <span class="region-title"
                    >South: Humid, Volatile, and Influenced by the Gulf</span
                  >
                  <span class="detail-arrow">‚ñº</span>
                </summary>
                <div class="insight-detail">
                  The South is directly exposed to warm, moisture-rich air from
                  the Gulf of Mexico, leading to high rainfall but also large
                  year-to-year swings. Tropical systems, heat-driven
                  thunderstorms, and drought cycles all collide here, creating a
                  wet but highly variable summer precipitation pattern.
                </div>
              </details>

              <!-- Midwest -->
              <details class="insight-item">
                <summary class="insight-summary">
                  <span class="region-title"
                    >Midwest: Moderate but Gradually Increasing</span
                  >
                  <span class="detail-arrow">‚ñº</span>
                </summary>
                <div class="insight-detail">
                  The Midwest's rainfall is shaped by storm tracks that pull
                  moisture northward from the Gulf. As warming strengthens this
                  moisture transport and intensifies convective storms, the
                  region shows a slow but noticeable rise in summer
                  precipitation, especially in the late 20th century.
                </div>
              </details>

              <!-- West -->
              <details class="insight-item">
                <summary class="insight-summary">
                  <span class="region-title"
                    >West: The Driest and Most Stable</span
                  >
                  <span class="detail-arrow">‚ñº</span>
                </summary>
                <div class="insight-detail">
                  The West's summer precipitation is shaped by its distance from
                  major moisture sources and the rain shadow effect of mountain
                  ranges. With less atmospheric moisture to begin with, warming
                  has a more muted effect here. The region shows the most stable
                  precipitation pattern, with minimal long-term trends compared
                  to the wetter eastern regions.
                </div>
              </details>
            </div>
          </div>
          <div class="invisible-separator"></div>
        </div>
      </div>

      <!-- Slide 4: Regional Precipitation Chart -->
      <div class="slide scrollable">
        <div
          class="slide-content regional-chart-slide"
          style="grid-template-columns: 1fr; max-width: 900px; gap: 1.5rem"
        >
          <div class="slide-text regional-chart-text">
            <h2>Regional Precipitation: Past and Future</h2>
            <p>
              Explore how precipitation patterns vary across different regions
              of the United States, comparing historical data with future
              projections under low and high emission scenarios.
            </p>
          </div>
          <div class="chart-container regional-chart-container">
            <!-- Region Navigation -->
            <div
              style="
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 1rem;
                margin-bottom: 0.5rem;
              "
            >
              <button
                id="prevBtn"
                style="
                  background: #2e86ab;
                  color: white;
                  border: none;
                  padding: 0.5rem 1rem;
                  border-radius: 4px;
                  cursor: pointer;
                  font-size: 14px;
                "
              >
                ‚Üê Prev
              </button>
              <div
                id="dotsContainer"
                style="display: flex; gap: 0.75rem; align-items: center"
              ></div>
              <span
                id="regionName"
                style="
                  font-weight: 600;
                  color: #2e86ab;
                  min-width: 100px;
                  text-align: center;
                "
                >Northeast</span
              >
              <button
                id="nextBtn"
                style="
                  background: #2e86ab;
                  color: white;
                  border: none;
                  padding: 0.5rem 1rem;
                  border-radius: 4px;
                  cursor: pointer;
                  font-size: 14px;
                "
              >
                Next ‚Üí
              </button>
            </div>

            <!-- Chart SVG -->
            <div class="chart-svg-wrapper">
              <svg id="chartSvg"></svg>
            </div>

            <!-- Legend -->
            <div
              style="
                display: flex;
                justify-content: center;
                gap: 1.5rem;
                margin-top: 0;
                margin-bottom: 0.5rem;
                flex-wrap: wrap;
              "
            >
              <div
                class="legend-item active"
                data-scenario="historical"
                style="
                  display: flex;
                  align-items: center;
                  gap: 0.5rem;
                  cursor: pointer;
                "
              >
                <div
                  class="legend-box selected"
                  style="width: 20px; height: 3px; background: #888"
                ></div>
                <span style="font-size: 14px">Historical</span>
              </div>
              <div
                class="legend-item active"
                data-scenario="low"
                style="
                  display: flex;
                  align-items: center;
                  gap: 0.5rem;
                  cursor: pointer;
                "
              >
                <div
                  class="legend-box selected"
                  style="width: 20px; height: 3px; background: #1e88e5"
                ></div>
                <span style="font-size: 14px">Low Emissions (SSP1-2.6)</span>
              </div>
              <div
                class="legend-item active"
                data-scenario="high"
                style="
                  display: flex;
                  align-items: center;
                  gap: 0.5rem;
                  cursor: pointer;
                "
              >
                <div
                  class="legend-box selected"
                  style="width: 20px; height: 3px; background: #e53935"
                ></div>
                <span style="font-size: 14px">High Emissions (SSP5-8.5)</span>
              </div>
              <div
                class="legend-item"
                id="regressionToggle"
                style="
                  display: flex;
                  align-items: center;
                  gap: 0.5rem;
                  cursor: pointer;
                "
              >
                <div
                  style="
                    width: 20px;
                    height: 2px;
                    background: #999;
                    border-top: 1px dashed #999;
                  "
                ></div>
                <span style="font-size: 14px">Trend Lines</span>
              </div>
            </div>

            <!-- Year Range Controls -->
            <div
              style="
                display: flex;
                justify-content: center;
                gap: 0.75rem;
                align-items: center;
                flex-wrap: wrap;
                margin-top: 0;
              "
            >
              <label style="font-size: 14px">Year Range:</label>
              <input
                type="number"
                id="yearStartInput"
                placeholder="Start"
                style="
                  padding: 0.4rem;
                  border: 1px solid #ddd;
                  border-radius: 4px;
                  width: 100px;
                  font-size: 14px;
                "
              />
              <span style="font-size: 14px">to</span>
              <input
                type="number"
                id="yearEndInput"
                placeholder="End"
                style="
                  padding: 0.4rem;
                  border: 1px solid #ddd;
                  border-radius: 4px;
                  width: 100px;
                  font-size: 14px;
                "
              />
              <button
                id="applyYearBtn"
                style="
                  background: #2e86ab;
                  color: white;
                  border: none;
                  padding: 0.4rem 1rem;
                  border-radius: 4px;
                  cursor: pointer;
                  font-size: 14px;
                "
              >
                Apply
              </button>
              <button
                id="resetYearBtn"
                style="
                  background: #999;
                  color: white;
                  border: none;
                  padding: 0.4rem 1rem;
                  border-radius: 4px;
                  cursor: pointer;
                  font-size: 14px;
                "
              >
                Reset
              </button>
            </div>
          </div>
          <div class="invisible-separator"></div>
        </div>

        <!-- Tooltip -->
        <div
          id="tooltip"
          style="
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 0.5rem;
            border-radius: 4px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            font-size: 12px;
            z-index: 1000;
          "
        ></div>
      </div>

      <!-- Slide 5: Climate Choices Game -->
      <div class="slide">
        <div class="game-slide-content">
          <div class="game-container">
            <iframe src="game/index.html" title="Climate Choices Game"></iframe>
          </div>
        </div>
      </div>

      <!-- Slide 6: Writeup -->
      <div class="slide">
        <div
          class="slide-content"
          style="grid-template-columns: 1fr; max-width: 900px; gap: 1.5rem"
        >
          <div class="slide-text">
            <h2>The Writeup</h2>

            <div class="writeup-section">
              <h3>What have you done so far?</h3>
              <p>
                We decided to present our ideas using a slide-based website that
                allows users to navigate through our findings in an interactive
                and engaging manner. We gave a brief overview of how rainfall in
                the United States has shifted over the years, examining
                historical patterns and regional variations across different
                parts of the country. Through our analysis, we've demonstrated
                that rainfall will inevitably increase due to climate change,
                but we still have it in our control to influence the extent of
                these changes. If nations work together to lower carbon emission
                levels, future rainfall can be more predictable and less
                volatile, making it easier for communities to adapt and prepare
                for changing precipitation patterns.
              </p>
            </div>

            <div class="writeup-section">
              <h3>
                What will be the most challenging of your project to design and
                why?
              </h3>
              <p>
                The most challenging aspect of our project was determining how
                to present the data in a fun and engaging way that would capture
                and maintain the audience's attention. The change in
                precipitation levels might not be as significant or immediately
                noticeable as the change in temperature, so it can be
                challenging to convince the audience about the importance and
                urgency of our findings. We needed to find creative ways to
                visualize subtle changes in rainfall patterns while making the
                data accessible and meaningful to a general audience.
                Additionally, we are integrating our work from project 3 due to
                its similar theme of climate change and rainfall patterns,
                however, it is difficult to improve on the existing work and
                align it more with our current goal with this project.
                Nonetheless, we are still looking into this as it project 3
                contains strong evidence and analysis of the topic.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="slide-indicator" class="slide-indicator"></div>

    <script src="main.js"></script>
    <script src="rain-canvas.js"></script>
    <script src="industrial-precipitation.js"></script>
    <script src="regional-precipitation.js"></script>
  </body>
</html>
